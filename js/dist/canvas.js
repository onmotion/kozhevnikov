"use strict";var cH,cW,c=document.getElementById("c"),ctx=c.getContext("2d"),colors=["#B33771","#282741","#74b9ff","#182C61","#FEA47F"],bgColor=colors[0],animations=[],circles=[],colorPicker=function(a){function b(){return d=d++<a.length-1?d:0,a[d]}function c(){return a[d]}var d=0;return{next:b,current:c}}.bind(null,colors)();function removeAnimation(a){var b=animations.indexOf(a);-1<b&&animations.splice(b,1)}function calcPageFillRadius(a,b){var c=Math.pow,d=Math.max,e=d(a-0,cW-a),f=d(b-0,cH-b);return Math.sqrt(c(e,2)+c(f,2))}function addClickListeners(){document.addEventListener("touchstart",handleEvent),document.addEventListener("mousedown",handleEvent)}function handleEvent(a){a.touches&&(a.preventDefault(),a=a.touches[0]);for(var b,c=colorPicker.current(),d=colorPicker.next(),f=calcPageFillRadius(a.pageX,a.pageY),g=Math.min(200,.4*cW),h=new Circle({x:a.pageX,y:a.pageY,r:0,fill:d}),j=anime({targets:h,r:f,duration:Math.max(f/2,750),easing:"easeOutQuart",complete:function complete(){bgColor=h.fill,removeAnimation(j)}}),k=new Circle({x:a.pageX,y:a.pageY,r:0,fill:c,stroke:{width:3,color:c},opacity:1}),l=anime({targets:k,r:g,opacity:0,easing:"easeOutExpo",duration:900,complete:removeAnimation}),m=[],n=0;32>n;n++)b=new Circle({x:a.pageX,y:a.pageY,fill:c,r:anime.random(24,48)}),m.push(b);var o=anime({targets:m,x:function x(a){return a.x+anime.random(g,-g)},y:function y(a){return a.y+anime.random(1.15*g,1.15*-g)},r:0,easing:"easeOutExpo",duration:anime.random(1e3,1300),complete:removeAnimation});animations.push(j,l,o)}function extend(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}var Circle=function(a){extend(this,a)};Circle.prototype.draw=function(){ctx.globalAlpha=this.opacity||1,ctx.beginPath(),ctx.arc(this.x,this.y,this.r,0,2*Math.PI,!1),this.stroke&&(ctx.strokeStyle=this.stroke.color,ctx.lineWidth=this.stroke.width,ctx.stroke()),this.fill&&(ctx.fillStyle=this.fill,ctx.fill()),ctx.closePath(),ctx.globalAlpha=1};var animate=anime({duration:1/0,update:function update(){ctx.fillStyle=bgColor,ctx.fillRect(0,0,cW,cH),animations.forEach(function(a){a.animatables.forEach(function(a){a.target.draw()})})}}),resizeCanvas=function(){cW=window.innerWidth,cH=window.innerHeight,c.width=cW*devicePixelRatio,c.height=cH*devicePixelRatio,ctx.scale(devicePixelRatio,devicePixelRatio)};(function(){resizeCanvas(),window.CP&&(window.CP.PenTimer.MAX_TIME_IN_LOOP_WO_EXIT=6e3),window.addEventListener("resize",resizeCanvas),addClickListeners(),!window.location.pathname.match(/fullcpgrid/)||startFauxClicking(),handleInactiveUser()})();function handleInactiveUser(){function a(){clearTimeout(b),document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}var b=setTimeout(function(){fauxClick(cW/2,cH/2)},2e3);document.addEventListener("mousedown",a),document.addEventListener("touchstart",a)}function startFauxClicking(){setTimeout(function(){fauxClick(anime.random(.2*cW,.8*cW),anime.random(.2*cH,.8*cH)),startFauxClicking()},anime.random(200,900))}function fauxClick(a,b){var c=new Event("mousedown");c.pageX=a,c.pageY=b,document.dispatchEvent(c)}